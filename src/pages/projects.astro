---
import Card from '../components/project-card.astro';
import Base from '../layouts/base.astro';

// Dynamically import all Markdown files in the projects folder
const projectFiles = import.meta.glob('../content/projects/*.md');
const projects = await Promise.all(
  Object.entries(projectFiles).map(async ([path, resolver]) => {
    const { frontmatter, compiledContent } = await resolver();
    return { 
      ...frontmatter, 
      description: compiledContent(),
    };
  })
);
---
<Base pageName="Projects" pageColor="Gold">
    {projects.map((project) => (
      <Card 
        title={project.title}
        github={project.github}
        demo={project.demo}
        image={project.image}
        technologies={project.technologies}
        shortDescription={project.shortDescription}
      />
    ))}
</Base>

